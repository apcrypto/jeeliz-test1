 /**
 * Jeeliz Face Filter - https://github.com/jeeliz/jeelizFaceFilter
 *
 * Copyright 2018 Jeeliz ( https://jeeliz.com )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var JEEFACEFILTERAPI=(function(){function ba(b,c,e){return b*(1-e)+c*e}function ia(b,c){var e=new XMLHttpRequest;e.open("GET",b,!0);e.withCredentials=!1;e.onreadystatechange=function(){4!==e.readyState||200!==e.status&&0!==e.status||c(e.responseText)};e.send()}function Ba(b,c,e){return Math.min(Math.max((e-b)/(c-b),0),1)}
function Ca(b){switch(b){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}
function Ea(b,c){var e=c%8;return b[(c-e)/8]>>7-e&1}
function Ha(b){var c=JSON.parse(b);b=c.ne;var e=c.nf,g=c.n;var m="undefined"===typeof btoa?Buffer.from(c.data,"base64").toString("latin1"):atob(c.data);var n=m.length;c=new Uint8Array(n);for(var l=0;l<n;++l)c[l]=m.charCodeAt(l);m=new Float32Array(g);n=new Float32Array(e);l=b+e+1;for(var r=0;r<g;++r){for(var t=l*r,A=0===Ea(c,t)?1:-1,k=t+1,u=1,B=0,C=k+b-1;C>=k;--C)B+=u*Ea(c,C),u*=2;k=B;t=t+1+b;u=n.length;B=0;for(C=t;C<t+u;++C)n[B]=Ea(c,C),++B;for(u=t=0;u<e;++u)t+=n[u]*Math.pow(2,-u-1);m[r]=0===t&&0===
k?0:A*(1+t)*Math.pow(2,1+k-Math.pow(2,b-1))}return m}
var w=function(){function b(f,z){f=a.createShader(f);a.shaderSource(f,z);a.compileShader(f);return a.getShaderParameter(f,a.COMPILE_STATUS)?f:!1}function c(f,z){f=b(a.VERTEX_SHADER,f);z=b(a.FRAGMENT_SHADER,z);m.push(f,z);var D=a.createProgram();a.attachShader(D,f);a.attachShader(D,z);a.linkProgram(D);return D}function e(f){void 0===f.ca&&(f.ca="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===f.xa&&(f.xa=["a0"]);void 0===
f.ka&&(f.ka=[2]);if(void 0===f.precision||"highp"===f.precision)f.precision=A;f.id=r++;void 0!==f.kd&&f.kd.forEach(function(D,da){f.a=f.a.replace(D,f.La[da])});f.sb=0;f.ka.forEach(function(D){f.sb+=4*D});f.qa=c(f.ca,"precision "+f.precision+" float;\n"+f.a);f.j={};f.c.forEach(function(D){f.j[D]=a.getUniformLocation(f.qa,D)});f.attributes={};f.la=[];f.xa.forEach(function(D){var da=a.getAttribLocation(f.qa,D);f.attributes[D]=da;f.la.push(da)});if(f.f){a.useProgram(f.qa);l=f;n=f.id;for(var z in f.f)a.uniform1i(f.j[z],
f.f[z])}f.cb=!0}function g(f){Ja.qd(I);n!==f.id&&(I.ia(),n=f.id,l=f,a.useProgram(f.qa),f.la.forEach(function(z){0!==z&&a.enableVertexAttribArray(z)}))}var m=[],n=-1,l=null,r=0,t=!1,A="highp",k=["u1"],u=["u0"],B={u1:0},C={u0:0},W={u1:0,u2:1},T={u3:0},K={s0:{a:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",c:k,f:B},s1:{a:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",c:k,f:B,precision:"lowp"},s2:{a:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",
c:["u1","u2"],f:W},s3:{a:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",c:k,f:B},s4:{a:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",c:["u1","mask"],f:W},s5:{a:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",c:k,f:B},s6:{a:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",
c:k,f:B},s7:{a:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",c:["u0","u4"],f:C},s8:{a:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 g=vec4(.25,.25,.25,.25),e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,g);gl_FragColor=b*e;}",c:["u0","u4"],f:C},s9:{a:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",
c:k,f:B},s10:{a:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",c:["u1","u5","u6"],f:{u1:0,u5:1}},s11:{a:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",c:["u1","u7"],f:B},s12:{a:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 k(float a){if(a==0.)return vec4(0.,0.,0.,0.);float l=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),m=c+127.,b=(a/exp2(c)-1.)*8388608.,d=m/2.,n=fract(d)*2.,o=floor(d),p=e(b,0.,8.),q=e(b,8.,16.),r=n*128.+e(b,16.,23.),j=l+o;return vec4(p,q,r,j)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=k(a);}",
c:["u1","u8"],f:B},s13:{a:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",c:u,f:C},s14:{a:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(e,a);}",c:u,f:C},s15:{a:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-e,a,step(0.,a));}",c:u,f:C},s16:{a:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-e;gl_FragColor=mix(.1*b,a,step(0.,a));}",
c:u,f:C},s17:{a:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",c:["u0","u6","u9"],f:{u0:0,u6:1,u9:2}},s18:{a:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",c:u,f:C},s19:{a:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=log(e+a);gl_FragColor=b;}",
c:u,f:C},s20:{a:"uniform sampler2D u0,u10;uniform float u11;const vec2 f=vec2(.5,.5);const float g=1e-5;const vec4 h=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u10,f);float b=u11*u11;vec4 c=max(b*a,g*h);gl_FragColor=texture2D(u0,vv0)/c;}",c:["u0","u12","u11"],f:{u0:0,u12:1}},s21:{a:"uniform sampler2D u1;uniform vec2 u13;varying vec2 vv0;void main(){float a=u13.x*u13.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u13.y),g=floor(u13.x*fract(b*u13.y)),f=(g*u13.y+d)/a;gl_FragColor=texture2D(u1,f+c/a);}",
c:["u1","u13"],f:B},s22:{a:"uniform sampler2D u14,u15,u16;varying vec2 vv0;void main(){vec4 a=texture2D(u16,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u14,b),e=texture2D(u15,c);gl_FragColor=d*e;}",c:["u14","u15","u16"],f:{u15:0,u14:1,u16:2}},s23:{a:"uniform float u17;uniform sampler2D u14,u15;varying vec2 vv0;void main(){vec2 a=fract(vv0*u17);vec4 b=texture2D(u14,vv0),c=texture2D(u15,a);gl_FragColor=b*c;}",c:["u15","u14","u17"],f:{u15:0,u14:1}},s24:{a:"uniform float u17;uniform sampler2D u14,u15,u18,u19,u20,u21;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 i=vv0*u17,m=floor(i),c=i-m;vec4 n=texture2D(u14,vv0),d=texture2D(u15,c),a=texture2D(u21,vv0);a=a*255.;vec4 o=texture2D(u18,c),p=texture2D(u19,c),q=texture2D(u20,c),j=step(-g,-a),b=e-j,k=b*step(-e-g,-a);b*=e-k;vec4 h=b*step(-2.*e-g,-a);b*=e-h;vec4 l=b;d=j*d+k*o+h*p+l*q,gl_FragColor=n*d;}",
c:"u14 u15 u17 u21 u18 u19 u20".split(" "),f:{u15:0,u14:1,u21:3,u18:4,u19:5,u20:6}},s25:{a:"uniform sampler2D u14,u15,u22;uniform float u17,u23,u24,u25;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u23*vv0),g=u23*vv0-a;float b=u17/u23;vec2 c=floor(g*b),d=g*b-c,h=(a+d)/u23;float l=u23*u25/u17;vec2 m=l*c,i=(m+d*u24)/u25,e=step(i,j);vec4 n=texture2D(u14,h),o=texture2D(u15,i),p=n*o*e.x*e.y,k=texture2D(u22,h);gl_FragColor=p*u24*u24+k;}",c:"u14 u15 u17 u23 u24 u25 u22".split(" "),f:{u15:0,
u14:1,u22:2}},s26:{a:"uniform sampler2D u14,u15;varying vec2 vv0;void main(){vec4 a=texture2D(u14,vv0),b=texture2D(u15,vv0);gl_FragColor=a*b;}",c:["u14","u15"],f:{u15:0,u14:1}},s27:{a:"uniform sampler2D u1,u22;uniform float u26;varying vec2 vv0;void main(){gl_FragColor=texture2D(u22,vv0)+u26*texture2D(u1,vv0);}",c:["u1","u22","u26"],f:{u1:0,u22:1}},s28:{a:"varying vec2 vv0;uniform sampler2D u1;const vec4 g=vec4(1.,1.,1.,1.),e=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,e)*g;}",
c:k,f:B,precision:"lowp"},s29:{a:"varying vec2 vv0;uniform sampler2D u1;uniform float u27;const vec3 e=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u27)).rgb,c=texture2D(u1,vv0+vec2(u27,u27)).rgb,d=texture2D(u1,vv0+vec2(u27,0.)).rgb;gl_FragColor=vec4(dot(a,e),dot(b,e),dot(c,e),dot(d,e));}",c:["u1","u27"],f:B,precision:"lowp"},s30:{a:"varying vec2 vv0;uniform sampler2D u1;uniform float u27;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u27)).rgb,c=texture2D(u1,vv0+vec2(u27,u27)).rgb,d=texture2D(u1,vv0+vec2(u27,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
c:["u1","u27"],f:B,precision:"lowp"},s31:{a:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 g=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u28))*2.,b-=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,b+=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u28))*2.,b+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),f=texture2D(u2,vv0);gl_FragColor=f.a*e.r*g;}",
c:["u1","u2","u28"],f:W},s32:{a:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float i=0.;vec2 l=k*u28,a,b;float c,d,g=0.;for(float f=-4.;f<=4.;f+=1.)for(float e=-4.;e<=4.;e+=1.)a=vec2(f,e),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,i+=d*texture2D(u1,b).r,g+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-i/g)*j;}",c:["u1","u2","u28"],f:W},s33:{a:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 h=vec2(.5,.5),i=vec2(1.,0.),j=vec2(0.,1.);void main(){vec2 a=vv0-u7*h;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*i),d=texture2D(u3,a+u7*j),k=texture2D(u3,a+u7),l=e(b,c),g=e(d,k);gl_FragColor=e(l,g);}",
c:["u3","u7"],f:T},s34:{a:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 j=vec2(1.,0.),k=vec2(0.,1.),l=vec2(2.,0.),m=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*j),d=texture2D(u3,a+u7*k),g=texture2D(u3,a+u7),i=e(b,c),h=e(d,g);return e(i,h);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*l),d=f(a+u7*2.),g=f(a+u7*m),i=e(b,c),h=e(d,g);gl_FragColor=e(i,h);}",c:["u3","u7"],f:T},s35:{a:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",
c:["u1"],f:B,precision:"lowp"},s36:{a:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const float d=15444.;void main(){vec4 a=1001./d*texture2D(u1,vv0-3.*u7)+2002./d*texture2D(u1,vv0-2.*u7)+3003./d*texture2D(u1,vv0-u7)+3432./d*texture2D(u1,vv0)+3003./d*texture2D(u1,vv0+u7)+2002./d*texture2D(u1,vv0+2.*u7)+1001./d*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",c:["u7","u1"],f:B,precision:"lowp"},s37:{a:"uniform sampler2D u1,u29,u30;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float h=.1;void main(){vec4 a=texture2D(u29,vv0),b=texture2D(u30,vv0),c=texture2D(u1,vv0),d=max(g*h,b-a*a),f=sqrt(d);gl_FragColor=(c-a)/f;}",
c:["u1","u29","u30"],f:{u1:0,u29:1,u30:2}}},J={s38:{a:"uniform float u17,u31;uniform sampler2D u14,u15,u22;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u22,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u17,xyTo=floor(vv0*u17+eps2);float weightSize=toSparsity*u17;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u31*(xyPatch-halfFromSparsity))/u17,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u14,uvWeight)*texture2D(u15,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
c:["u17","u14","u15","u22","u31"],La:["1.1111","gl_FragColor\\*=2.2222;"]},s39:{a:"uniform float u17,u31,u25;uniform sampler2D u14,u15,u22;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u22,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u25,xyTo=floor(vv0*u17+eps2);float weightSize=fromSparsity*u25;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u17;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u31*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u25,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u14,uvWeight)*texture2D(u15,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
c:"u17 u25 u14 u15 u22 u31".split(" "),La:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},I={gb:function(){return t},o:function(){if(!t){A="highp";for(var f in K)e(K[f],f);w.set("s0");a.enableVertexAttribArray(0);f=Ka.o();t=!0;return f}},nc:function(f){f.forEach(function(z){I.vb(z)})},vb:function(f){K[f.id]=f;e(f,f.id)},Mb:function(f,z,D){z||(z=f);K[z]=Object.create(J[f]);K[z].Uc=!0;J[f].La&&J[f].La.forEach(function(da,na){K[z].a=K[z].a.replace(new RegExp(da,"g"),D[na])});e(K[z],z)},set:function(f){g(K[f])},
Jc:function(f){return"undefined"===typeof K[f]?!1:K[f].cb},ia:function(){-1!==n&&(n=-1,l.la.forEach(function(f){0!==f&&a.disableVertexAttribArray(f)}))},qb:function(){var f=0;l.la.forEach(function(z,D){D=l.ka[D];a.vertexAttribPointer(z,D,a.FLOAT,!1,l.sb,f);f+=4*D})},Cb:function(){a.enableVertexAttribArray(0)},ta:function(){a.vertexAttribPointer(l.la[0],2,a.FLOAT,!1,8,0)},fc:function(f,z){a.uniform1i(l.j[f],z)},B:function(f,z){a.uniform1f(l.j[f],z)},sa:function(f,z,D){a.uniform2f(l.j[f],z,D)},me:function(f,
z){a.uniform2fv(l.j[f],z)},oe:function(f,z){a.uniform3fv(l.j[f],z)},rd:function(f,z,D,da){a.uniform3f(l.j[f],z,D,da)},pe:function(f,z,D,da,na){a.uniform4f(l.j[f],z,D,da,na)},pb:function(f,z){a.uniform4fv(l.j[f],z)},qe:function(f,z){a.uniformMatrix2fv(l.j[f],!1,z)},re:function(f,z){a.uniformMatrix3fv(l.j[f],!1,z)},se:function(f,z){a.uniformMatrix4fv(l.j[f],!1,z)},K:function(f,z){I.set(f);z.forEach(function(D){switch(D.type){case "4f":a.uniform4fv(l.j[D.name],D.value);break;case "3f":a.uniform3fv(l.j[D.name],
D.value);break;case "2f":a.uniform2fv(l.j[D.name],D.value);break;case "1f":a.uniform1f(l.j[D.name],D.value);break;case "1i":a.uniform1i(l.j[D.name],D.value);break;case "mat2":a.uniformMatrix2fv(l.j[D.name],!1,D.value);break;case "mat3":a.uniformMatrix3fv(l.j[D.name],!1,D.value);break;case "mat4":a.uniformMatrix4fv(l.j[D.name],!1,D.value)}})},Wd:function(){return"lowp"},h:function(){a.disableVertexAttribArray(0);I.ia();for(var f in K){var z=K[f];z.cb&&(z.cb=!1,a.deleteProgram(z.qa));z.Uc&&delete K[f]}m.forEach(function(D){a.deleteShader(D)});
m.splice(0);r=0;t=!1}};return I}(),a=null,Na=function(){function b(k){console.log("ERROR in ContextFeedForward: ",k);return!1}function c(){if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream)return!0;if(/(Mac)/i.test(navigator.platform)){var k;(k=navigator.userAgent)?(k=k.match(/Mac OS X (\d+)_(\d+)/)||k.match(/Mac OS X (\d+).(\d+)/),k=!k||3>k.length?!1:[parseInt(k[1],10),parseInt(k[2],10)]):k=!1;if(k&&10===k[0]&&15===k[1])return!0}return!1}var e=null,g=null,m=null,n=null,l=!0,r=null,
t=null,A={A:function(){return e.width},N:function(){return e.height},Od:function(){return e},Nd:function(){return a},u:function(){return l},flush:function(){a.flush()},Nc:function(){r||(r=new Uint8Array(e.width*e.height*4));a.readPixels(0,0,e.width,e.height,a.RGBA,a.UNSIGNED_BYTE,r);return r},Qd:function(){return e.toDataURL("image/jpeg")},Rd:function(){La.F();g||(g=document.createElement("canvas"),m=g.getContext("2d"));g.width=e.width;g.height=e.height;for(var k=A.Nc(),u=m.createImageData(g.width,
g.height),B=g.width,C=g.height,W=u.data,T=0;T<C;++T)for(var K=C-T-1,J=0;J<B;++J){var I=4*(T*B+J),f=4*(K*B+J);W[I]=k[f];W[I+1]=k[f+1];W[I+2]=k[f+2];W[I+3]=k[f+3]}m.putImageData(u,0,0);return g.toDataURL("image/png")},Pd:function(k){!g&&k&&(g=document.createElement("canvas"),m=g.getContext("2d"));var u=k?g:document.createElement("canvas");u.width=e.width;u.height=e.height;(k?m:u.getContext("2d")).drawImage(e,0,0);return u},o:function(k){k.Cc&&!k.Qa?e=document.getElementById(k.Cc):k.Qa&&(e=k.Qa);e||
(e=document.createElement("canvas"));e.width=k&&void 0!==k.width?k.width:512;e.height=k&&void 0!==k.height?k.height:512;"undefined"===typeof k&&(k={});void 0===k.premultipliedAlpha&&(k.premultipliedAlpha=!1);void 0===k.Pb&&(k.Pb=!0);void 0===k.antialias&&(k.antialias=!1);if(!a){var u={antialias:k.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:k.premultipliedAlpha,stencil:!1,depth:k.Pb};c()||(a=e.getContext("webgl2",u));a?l=!0:((a=e.getContext("webgl",u))||(a=e.getContext("experimental-webgl",
u)),l=!1)}if(!a)return b("WebGL is not enabled");(n=a.getExtension("WEBGL_lose_context"))&&k.$b&&(t=k.$b,e.addEventListener("webglcontextlost",t,!1));if(!Ma.o())return b("Not enough capabilities");if(!Ma.xc()&&l)return b("Your configuration cannot process color buffer float");a.clearColor(0,0,0,0);a.disable(a.DEPTH_TEST);a.disable(a.BLEND);a.disable(a.DITHER);a.disable(a.STENCIL_TEST);a.disable(a.SCISSOR_TEST);a.GENERATE_MIPMAP_HINT&&a.hint(a.GENERATE_MIPMAP_HINT,a.FASTEST);a.disable(a.SAMPLE_ALPHA_TO_COVERAGE);
a.disable(a.SAMPLE_COVERAGE);return!0},Sc:function(){if(!w.o())return!1;a.depthFunc(a.LEQUAL);a.clearDepth(1);return!0},h:function(){a&&Ma.h();n&&t&&(e.removeEventListener("webglcontextlost",t,!1),t=null);r=m=g=e=null}};return A}(),Ja=function(){var b="undefined"===typeof w?null:w;return{qd:function(c){b!==c&&(b&&b.ia(),b=c)},gb:function(){return b.gb()},ta:function(){b.ta()},qb:function(){b.qb()},ia:function(){b.ia()},set:function(c){b.set(c)},h:function(){b.h&&b.h()}}}(),O=function(){var b=null,
c=null,e=0,g=-2,m=-2,n=!1,l=[],r={reset:function(){m=g=-2},o:function(){n||(b=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,b),a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),a.STATIC_DRAW),c=a.createBuffer(),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,c),a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),a.STATIC_DRAW),r.ma(),n=!0)},instance:function(t){var A=e++,k=t.Y?t.Y.length:0,u="undefined"===typeof t.mode?a.STATIC_DRAW:t.mode,B=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,
B);a.bufferData(a.ARRAY_BUFFER,t.jc instanceof Float32Array?t.jc:new Float32Array(t.jc),u);g=A;var C=null,W=null,T=null;if(t.Y){C=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,C);var K=null;65536>t.Y.length?(K=Uint16Array,W=a.UNSIGNED_SHORT,T=2):(K=Uint32Array,W=a.UNSIGNED_INT,T=4);a.bufferData(a.ELEMENT_ARRAY_BUFFER,t.Y instanceof K?t.Y:new K(t.Y),u);m=A}var J={wc:function(I){g!==A&&(a.bindBuffer(a.ARRAY_BUFFER,B),g=A);I&&Ja.qb()},tc:function(){m!==A&&(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,
C),m=A)},bind:function(I){J.wc(I);J.tc()},Kd:function(){a.drawElements(a.TRIANGLES,k,W,0)},Ld:function(I,f){a.drawElements(a.TRIANGLES,I,W,f*T)},remove:function(){a.deleteBuffer(B);t.Y&&a.deleteBuffer(C);J=null}};l.push(J);return J},ma:function(){-1!==g&&(a.bindBuffer(a.ARRAY_BUFFER,b),g=-1);-1!==m&&(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,c),m=-1)},g:function(t,A){t&&O.ma();A&&Ja.ta();a.drawElements(a.TRIANGLES,3,a.UNSIGNED_SHORT,0)},Hb:function(){a.deleteBuffer(b);a.deleteBuffer(c)},h:function(){r.Hb();
l.forEach(function(t){t.remove()});a.bindBuffer(a.ARRAY_BUFFER,null);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);r.reset();n=!1;l.splice(0);e=0}};return r}(),La=function(){var b=null,c=null,e=null,g=!1,m=[],n={w:-2,Fb:1},l={o:function(){if(!g){b=a.createFramebuffer();var r=Ma.u();c=r&&a.DRAW_FRAMEBUFFER?a.DRAW_FRAMEBUFFER:a.FRAMEBUFFER;e=r&&a.READ_FRAMEBUFFER?a.READ_FRAMEBUFFER:a.FRAMEBUFFER;g=!0}},Td:function(){return c},Za:function(){return e},fa:function(){return a.FRAMEBUFFER},Xd:function(){return n},
Md:function(){return b},instance:function(r){void 0===r.Ob&&(r.Ob=!1);var t=r.$?r.$:null,A=r.width,k=void 0!==r.height?r.height:r.width,u=b,B=null,C=!1,W=!1,T=0;t&&(A=A?A:t.A(),k=k?k:t.N());var K={ec:function(){C||(u=a.createFramebuffer(),C=!0,T=n.Fb++)},mc:function(){K.ec();K.l();B=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,B);a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,A,k);a.framebufferRenderbuffer(c,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,B);a.clearDepth(1)},bind:function(J,
I){T!==n.w&&(a.bindFramebuffer(c,u),n.w=T);t&&t.l();I&&a.viewport(0,0,A,k);J&&a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)},Cd:function(){T!==n.w&&(a.bindFramebuffer(c,u),n.w=T)},clear:function(){a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)},Gd:function(){a.clear(a.COLOR_BUFFER_BIT)},Hd:function(){a.clear(a.DEPTH_BUFFER_BIT)},sd:function(){a.viewport(0,0,A,k)},l:function(){T!==n.w&&(a.bindFramebuffer(c,u),n.w=T)},rtt:function(J){t=J;n.w!==T&&(a.bindFramebuffer(a.FRAMEBUFFER,u),n.w=T);J.l()},F:function(){a.bindFramebuffer(c,
null);n.w=-1},resize:function(J,I){A=J;k=I;B&&(a.bindRenderbuffer(a.RENDERBUFFER,B),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,A,k))},remove:function(){u===b||W||(a.bindFramebuffer(c,u),a.framebufferTexture2D(c,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,null,0),B&&a.framebufferRenderbuffer(c,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,null),a.bindFramebuffer(c,null),a.deleteFramebuffer(u),B&&a.deleteRenderbuffer(B));W=!0}};r.Ob&&K.mc();m.push(K);return K},F:function(){a.bindFramebuffer(c,null);n.w=-1},
xd:function(){a.bindFramebuffer(c,null);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);a.viewport(0,0,Ma.A(),Ma.N());n.w=-1},reset:function(){n.w=-2},S:function(){0!==n.w&&(a.bindFramebuffer(c,b),n.w=0)},clear:function(){a.viewport(0,0,Ma.A(),Ma.N());a.clear(a.COLOR_BUFFER_BIT)},h:function(){l.F();m.forEach(function(r){r.remove()});a.deleteFramebuffer(b);l.reset();g=!1;m.splice(0);n.w=-2;n.Fb=1}};return l}(),V=function(){function b(v){a.bindTexture(a.TEXTURE_2D,v)}function c(v){qa[0]=v;v=ea[0];var G=
v>>16&32768,h=v>>12&2047,U=v>>23&255;return 103>U?G:142<U?G|31744|((255==U?0:1)&&v&8388607):113>U?(h|=2048,G|(h>>114-U)+(h>>113-U&1)):G=(G|U-112<<10|h>>1)+(h&1)}function e(v){var G=new Uint16Array(v.length);v.forEach(function(h,U){G[U]=c(h)});return G}function g(){if(null!==ra.ab)return ra.ab;var v=n(e([1,1,1,1]));return null===v?!0:ra.ab=v}function m(){if(null!==ra.bb)return ra.bb;var v=n(new Uint8Array([255,255,255,255]));return null===v?!0:ra.bb=v}function n(v){if(!Ja.gb()||!T)return null;var G=
null;try{var h=a.getError();G=E.instance({isFloat:!1,H:!0,array:v,width:1});h=a.getError();if(h!==a.NO_ERROR)return!1}catch(U){return!1}La.F();a.viewport(0,0,1,1);a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT);Ja.set("s0");G.xb(0);O.g(!1,!0);v=new Uint8Array(4);a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,v);v=.9<v[0];G.remove();La.S();return v}var l=0,r=null,t=0,A=null,k=null,u=null,B=null,C=null,W=null,T=!1,K=[],J={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,
isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,D:null,Tc:!1,H:!1,W:null,Ga:4,hb:0},I=!1,f=null,z=null,D=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],da=!1,na=!1,qa=new Float32Array(1),ea=new Int32Array(qa.buffer),ra={ab:null,bb:null},E={o:function(){if(!T){C=[a.RGB,!1,a.RGB,a.RGBA];W=[a.RGB,!1,a.RGB,a.RGBA];r=[a.TEXTURE0,a.TEXTURE1,a.TEXTURE2,a.TEXTURE3,a.TEXTURE4,a.TEXTURE5,a.TEXTURE6,a.TEXTURE7];da="undefined"!==typeof JEContext;na="undefined"!==typeof Ma;
da&&JEContext.he()&&r.push(a.TEXTURE8,a.TEXTURE9);A=[-1,-1,-1,-1,-1,-1,-1,-1];B=[a.UNSIGNED_BYTE,a.FLOAT,a.FLOAT];if(!k){for(var v=new Float32Array(16384),G=0;16384>G;++G)v[G]=2*Math.random()-1;k={random:E.instance({isFloat:!0,isPot:!0,array:v,width:64}),ic:E.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}T=!0}},Rc:function(){E.yd()},ae:function(){return k.ic},yd:function(){B[1]=Ma.Da()},md:function(){W=C=[a.RGBA,a.RGBA,a.RGBA,a.RGBA]},ie:function(v,G){w.set("s1");La.F();
var h=v.A(),U=v.N();a.viewport(0,0,h,U);v.b(0);O.g(!1,!1);a.readPixels(0,0,h,U,a.RGBA,a.UNSIGNED_BYTE,G)},Lc:function(v,G,h){a.activeTexture(a.TEXTURE0);l=0;var U=a.createTexture();b(U);var sa=Ma.u()&&a.RGBA32F?a.RGBA32F:a.FLOAT;G=G instanceof Float32Array?G:new Float32Array(G);var oa=Math.log2(G.length);oa!==Math.floor(oa)&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE));a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,
a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,h);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,v.A(),v.N(),0,a.RGBA,sa,G);b(null);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1);La.S();w.set("s0");v.J();a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT);b(U);O.g(!0,!1);a.deleteTexture(U)},instance:function(v){function G(){b(ka);R&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,R);h.isPot?(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,h.isMirrorX?a.MIRRORED_REPEAT:a.REPEAT),
a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,h.isMirrorY?a.MIRRORED_REPEAT:a.REPEAT)):(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE));h.isAnisotropicFiltering&&"undefined"!==typeof JESETTINGS&&a.texParameterf(a.TEXTURE_2D,JEContext.Sd().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.Ad);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,h.isLinear?a.LINEAR:a.NEAREST);h.isLinear?a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,
h.isMipmap&&!Da?a.NEAREST_MIPMAP_LINEAR:a.LINEAR):a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,h.isMipmap&&!Da?a.NEAREST_MIPMAP_NEAREST:a.NEAREST);ca=C[h.Ga-1];P=W[h.Ga-1];la=B[sa];if(Ma.u()){var p=a.RGBA32F;ca===a.RGBA&&la===a.FLOAT&&p&&(P=p);ca===a.RGB&&la===a.FLOAT&&p&&(P=p,ca=a.RGBA)}if(h.H&&!h.isFloat||h.isFloat&&h.isMipmap&&Ka.Xc())(p=a.RGBA16F)&&(P=p),la=Ma.Da();h.hb&&(za=h.hb);h.isSrgb&&4===h.Ga&&(ca=JEContext.Zd());if(h.D)a.texImage2D(a.TEXTURE_2D,0,P,ca,la,h.D);else if(h.url)a.texImage2D(a.TEXTURE_2D,
0,P,ca,la,ta);else if(N){try{a.getError(),a.texImage2D(a.TEXTURE_2D,0,P,H,F,0,ca,la,N),a.getError()!==a.NO_ERROR&&(a.texImage2D(a.TEXTURE_2D,0,P,H,F,0,ca,la,null),a.getError()!==a.NO_ERROR&&a.texImage2D(a.TEXTURE_2D,0,a.RGBA,H,F,0,a.RGBA,a.UNSIGNED_BYTE,null))}catch(q){a.texImage2D(a.TEXTURE_2D,0,P,H,F,0,ca,la,null)}h.isKeepArray||(N=null)}else a.texImage2D(a.TEXTURE_2D,0,P,H,F,0,ca,la,null);if(h.isMipmap)if(!Da&&X)X.Ya(),ma=!0;else if(Da){p=Math.log(Math.min(H,F))/Math.log(2);aa=Array(1+p);aa[0]=
ka;for(var Q=1;Q<=p;++Q){var fa=Math.pow(2,Q),S=H/fa;fa=F/fa;var d=a.createTexture();b(d);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texImage2D(a.TEXTURE_2D,0,P,S,fa,0,ca,la,null);b(null);aa[Q]=d}ma=!0}b(null);A[l]=-1;R&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1);ha=!0;h.W&&X&&(h.W(X),h.W=null)}var h=Object.assign({},J,v),U=t++;null===h.isFlipY&&(h.isFlipY=h.url||h.array?!0:!1);h.data&&(h.array="string"===typeof h.data?
Ha(h.data):h.isFloat?new Float32Array(h.data):new Uint8Array(h.data),h.isFlipY=!1);var sa=0,oa=h.D?!0:!1,pa=null,Aa=null,Fa=!1,Ga=null;h.H=h.H||h.isFloat;h.H&&(sa=1);h.Tc||Ma.u()||!h.isFloat||!na||Ma.zb()||(h.isFloat=!1);h.isFloat&&(sa=2);h.isAnisotropicFiltering&&da&&!JEContext.ce()&&(h.isAnisotropicFiltering=!1);var ka=a.createTexture(),ta=null,N=!1,H=0,F=0,ha=!1,x=!1,va=null,M=null,Ia=null,ua=null,P=null,ca=null,la=null,R=h.isFlipY,Da=h.H&&h.isMipmap&&"undefined"!==typeof Ka&&!Ka.zc()?!0:!1,aa=
null,za=-1,ma=!1,wa={Rb:!1,yb:null,Gb:null};h.width&&(H=h.width,F=h.height?h.height:H);var X={get:function(){return ka},A:function(){return H},N:function(){return F},be:function(){return h.url},de:function(){return h.isFloat},fe:function(){return h.H},ge:function(){return h.isLinear},Ya:function(){a.generateMipmap(a.TEXTURE_2D)},vc:function(p,Q){Da?(p||(p=X.Kb()),X.Oa(Q),b(aa[p]),A[Q]=-1):X.b(Q)},Kb:function(){-1===za&&(za=Math.log(H)/Math.log(2));return za},Mc:function(p){if(Da){p||(p=X.Kb());w.set("s11");
X.Oa(0);for(var Q=H,fa=F,S=1;S<=p;++S)Q/=2,fa/=2,w.sa("u7",.25/Q,.25/fa),a.viewport(0,0,Q,fa),b(aa[S-1]),a.framebufferTexture2D(La.fa(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,aa[S],0),O.g(!1,1===S);A[0]=-1}else X.Ya()},Oa:function(p){p!==l&&(a.activeTexture(r[p]),l=p)},b:function(p){if(!ha)return!1;X.Oa(p);if(A[p]===U)return!1;b(ka);A[p]=U;return!0},xb:function(p){a.activeTexture(r[p]);l=p;b(ka);A[p]=U},l:function(){u=X;a.framebufferTexture2D(La.fa(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,ka,0)},J:function(){u=
X;a.viewport(0,0,H,F);a.framebufferTexture2D(La.fa(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,ka,0)},rb:E.rb,resize:function(p,Q){H=p;F=Q;G()},clone:function(p){p=E.instance({width:H,height:F,H:h.H,isFloat:h.isFloat,isLinear:h.isLinear,isMirrorY:h.isMirrorY,isFlipY:p?!R:R,isPot:h.isPot});Ja.set("s0");La.S();p.l();a.viewport(0,0,H,F);X.b(0);O.g(!0,!0);return p},sd:function(){a.viewport(0,0,H,F)},remove:function(){a.deleteTexture(ka);K.splice(K.indexOf(X),1);X=null},refresh:function(){X.xb(0);R&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,
!0);oa?a.texImage2D(a.TEXTURE_2D,0,P,ca,a.UNSIGNED_BYTE,h.D):a.texImage2D(a.TEXTURE_2D,0,P,H,F,0,ca,la,N);R&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},Ab:function(){var p=H*F*4;M=[new Uint8Array(p),new Uint8Array(p),new Uint8Array(p),new Uint8Array(p)];va=[new Float32Array(M[0].buffer),new Float32Array(M[1].buffer),new Float32Array(M[2].buffer),new Float32Array(M[3].buffer)];Ia=new Uint8Array(4*p);ua=new Float32Array(Ia.buffer);x=!0},dc:function(){x||X.Ab();a.readPixels(0,0,H,4*F,a.RGBA,a.UNSIGNED_BYTE,
Ia);for(var p=H*F,Q=2*p,fa=3*p,S=0;S<p;++S)va[0][S]=ua[S],va[1][S]=ua[S+p],va[2][S]=ua[S+Q],va[3][S]=ua[S+fa];return va},hd:function(){wa.Rb||(wa.yb=new Uint8Array(H*F*4),wa.Gb=new Float32Array(wa.buffer),wa.Rb=!0);a.readPixels(0,0,H,F,a.RGBA,a.UNSIGNED_BYTE,wa.yb);return wa.Gb},Bb:function(p){La.F();w.set("s12");X.b(0);if(p)a.viewport(0,0,H,F),w.pb("u8",.25,.25,.25,.25),O.g(!1,!0);else for(p=0;4>p;++p)a.viewport(0,F*p,H,F),w.pb("u8",D[p]),O.g(!1,0===p)},ue:function(p){var Q=la===B[0]&&!m();b(ka);
R&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!0);Q?(Fa||(pa=document.createElement("canvas"),pa.width=H,pa.height=F,Aa=pa.getContext("2d"),Ga=Aa.createImageData(H,F),Fa=!0),Ga.data.set(p),Aa.putImageData(Ga,0,0),a.texImage2D(a.TEXTURE_2D,0,P,ca,la,pa)):a.texImage2D(a.TEXTURE_2D,0,P,H,F,0,ca,la,p);A[l]=U;R&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},ve:function(p,Q){b(ka);Q&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!0);a.texImage2D(a.TEXTURE_2D,0,P,ca,la,p);A[l]=U;Q&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},ke:function(p,
Q){var fa=H*F,S=4*fa;p=h.H?p?"RGBE":"JSON":"RGBA";Q&&(p=Q);Q=Ma.u()&&!1;var d=null;switch(p){case "RGBE":d="s40";break;case "JSON":d=Q?"s0":"s12";break;case "RGBA":case "RGBAARRAY":d="s6"}x||("RGBA"===p||"RGBE"===p||"RGBAARRAY"===p?(M=new Uint8Array(S),x=!0):"JSON"!==p||Q||X.Ab());La.F();w.set(d);X.b(0);S=null;if("RGBA"===p||"RGBE"===p||"RGBAARRAY"===p){a.viewport(0,0,H,F);O.g(!0,!0);a.readPixels(0,0,H,F,a.RGBA,a.UNSIGNED_BYTE,M);if("RGBAARRAY"===p)return{data:M};I||(f=document.createElement("canvas"),
z=f.getContext("2d"),I=!0);f.width=H;f.height=F;fa=z.createImageData(H,F);fa.data.set(M);z.putImageData(fa,0,0);S=f.toDataURL("image/png")}else if("JSON"===p)if(Q)S=new Float32Array(fa),a.viewport(0,0,H,F),O.g(!0,!0),a.readPixels(0,0,H,F,a.RGBA,a.FLOAT,S);else{for(S=0;4>S;++S)a.viewport(0,F*S,H,F),w.pb("u8",D[S]),O.g(!S,!S);X.dc();S=Array(fa);for(Q=0;Q<fa;++Q)S[4*Q]=va[0][Q],S[4*Q+1]=va[1][Q],S[4*Q+2]=va[2][Q],S[4*Q+3]=va[3][Q]}return{format:p,data:S,width:H,height:F,isMirrorY:h.isMirrorY,isFlipY:"RGBA"===
p?h.isFlipY:!h.isFlipY}}};h.isMipmap&&!Da&&ha&&!ma&&(X.Ya(),ma=!0);if(h.url)b(ka),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,null),ta=new Image,ta.Jd="Anonymous",ta.crossOrigin="Anonymous",ta.src=h.url,ta.onload=function(){H=ta.width;F=ta.height;G()};else if(h.D){var L=function(){H=void 0!==h.D.videoWidth?h.D.videoWidth:h.D.width;F=void 0!==h.D.videoHeight?h.D.videoHeight:h.D.height;H?G():setTimeout(L,1)};L()}else h.array?(h.H&&!h.isFloat?h.array instanceof Uint16Array?(N=h.array,
G()):g()?(N=e(h.array),G()):(G(),E.Lc(X,h.array,R)):(N=h.isFloat?h.array instanceof Float32Array?h.array:new Float32Array(h.array):h.array instanceof Uint8Array?h.array:new Uint8Array(h.array),G()),h.isKeepArray||(N&&N!==h.array&&(N=null),delete h.array)):G();X.Yd=X.A;h.W&&ha&&(h.W(X),h.W=null);K.push(X);return X},F:function(v){v!==l&&(a.activeTexture(r[v]),l=v);A[v]=-1;b(null)},Ed:function(v){k.random.b(v)},rb:function(){u=null;a.framebufferTexture2D(La.fa(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,null,
0)},reset:function(){for(var v=0;v<r.length;++v)A[v]=-1;l=-1},je:function(){l=-1},wd:function(){for(var v=0;v<r.length;++v)E.F(v)},Hb:function(){k&&(k.random.remove(),k.ic.remove())},te:function(v,G){if("RGBA"===v.format||"RGBE"===v.format){var h=new Image;h.src=v.data;h.onload=function(){E.instance({isMirrorY:v.isMirrorY,isFlipY:v.isFlipY,isFloat:!1,D:h,W:function(U){if("RGBA"===v.format)G(U);else{var sa=v.width,oa=v.height,pa=E.instance({isMirrorY:v.isMirrorY,isFloat:!0,width:sa,height:oa,isFlipY:v.isFlipY});
La.S();a.viewport(0,0,sa,oa);w.set("s41");pa.l();U.b(0);O.g(!0,!0);E.F(0);G(pa);a.flush();setTimeout(U.remove,50)}}})}}else"JSON"===v.format?G(E.instance({isFloat:!0,isFlipY:v.isFlipY,width:v.width,height:v.height,array:new Float32Array(v.data)})):G(!1)},h:function(){u&&(La.S(),E.rb(),La.F());E.wd();K.slice(0).forEach(function(v){v.remove()});K.splice(0);T=!1;t=0;Ka.h()}};return E}(),Oa={instance:function(b){var c=[V.instance(b),V.instance(b)],e=[c[1],c[0]],g=e,m={pd:function(n){g[1].l();g[0].b(n);
m.hc()},le:function(n){g[1].J();g[0].b(n);m.hc()},hc:function(){g=g===c?e:c},refresh:function(){g[0].refresh();g[1].refresh()},b:function(n){g[0].b(n)},Dd:function(n){g[1].b(n)},Ud:function(){return g[0]},remove:function(){g[0].remove();g[1].remove();g=null}};return m}},Ma=function(){function b(){c="undefined"===typeof Na?JEContext:Na;e=!0}var c=null,e=!1,g=!1,m=null,n=null,l=!1,r=null,t=!1,A=null,k=!1,u=null,B=!1,C=!0,W=!0,T=!0,K=null,J="undefined"===typeof window?{}:window,I={o:function(){if(e)return!0;
b();I.Db();I.Xa();I.Hc();I.Ic();La.o();V.o();if(!I.Dc())return!1;O.o();V.Rc();return!0},A:function(){e||b();return c.A()},N:function(){e||b();return c.N()},u:function(){e||b();return c.u()},Hc:function(){B=(u=a.getExtension("EXT_color_buffer_float")||a.getExtension("WEBGL_color_buffer_float")||a.getExtension("OES_color_buffer_float"))?!0:!1;J.GL_EXT_COLORBUFFERFLOAT=u},Ic:function(){a.getExtension("EXT_color_buffer_half_float")||a.getExtension("WEBGL_color_buffer_half_float")||a.getExtension("OES_color_buffer_half_float")},
Db:function(){if(!g){this.u()||(m=a.getExtension("OES_texture_float")||a.getExtension("MOZ_OES_texture_float")||a.getExtension("WEBKIT_OES_texture_float"),l=(J.GL_EXT_FLOAT=m)?!0:!1);if(l||this.u())n=a.getExtension("OES_texture_float_linear")||a.getExtension("MOZ_OES_texture_float_linear")||a.getExtension("WEBKIT_OES_texture_float_linear"),J.GL_EXT_FLOATLINEAR=n;g=!0}},Xa:function(){if(!k){if(!this.u()){if(r=a.getExtension("OES_texture_half_float")||a.getExtension("MOZ_OES_texture_half_float")||a.getExtension("WEBKIT_OES_texture_half_float"))K=
r.HALF_FLOAT_OES,t=!0;!K&&a.HALF_FLOAT&&(K=a.HALF_FLOAT);!K&&a.FLOAT&&(K=a.FLOAT);J.GL_EXT_HALFFLOAT=r}if(t||this.u())A=a.getExtension("OES_texture_half_float_linear")||a.getExtension("MOZ_OES_texture_half_float_linear")||a.getExtension("WEBKIT_OES_texture_half_float_linear"),J.GL_EXT_HALFFLOATLINEAR=A;k=!0}},Da:function(){if(I.u())return a.HALF_FLOAT;I.Xa();return t?K:a.FLOAT},zb:function(){return C},yc:function(){return W},Fd:function(){return T},xc:function(){return B},Fc:function(){W=C=!0;var f=
a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,f);var z=a.createTexture();a.bindTexture(a.TEXTURE_2D,z);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texImage2D(a.TEXTURE_2D,0,I.u()&&a.RGBA32F?a.RGBA32F:a.RGBA,1,1,0,a.RGBA,a.FLOAT,null);a.framebufferTexture2D(La.fa(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,z,0);var D=a.checkFramebufferStatus(La.Za());D!==a.FRAMEBUFFER_COMPLETE&&(C=!1);a.texImage2D(a.TEXTURE_2D,0,I.u()&&
a.RGBA16F?a.RGBA16F:a.RGBA,1,1,0,a.RGBA,I.Da(),null);a.framebufferTexture2D(La.fa(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,z,0);D=a.checkFramebufferStatus(La.Za());D!==a.FRAMEBUFFER_COMPLETE&&(W=!1);a.bindTexture(a.TEXTURE_2D,null);a.bindFramebuffer(a.FRAMEBUFFER,null);a.deleteTexture(z);a.deleteFramebuffer(f)},Ec:function(){var f=La.instance({width:1});f.ec();var z=V.instance({width:1,isFloat:!0,Ga:3});f.l();z.l();a.flush();a.checkFramebufferStatus(La.Za())!==a.FRAMEBUFFER_COMPLETE?(V.md(),T=!1):T=!0;
f.remove();z.remove()},Dc:function(){I.Fc();if(!C&&!W)return!1;I.Ec();return!0},h:function(){V.h();Ja.h();La.h();O.h();e=!1}};return I}(),Ka=function(){function b(C,W,T,K){a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,K?a.NEAREST_MIPMAP_NEAREST:a.LINEAR);var J=null;try{if(J=a.getError(),J!==a.NO_ERROR&&console.log("GLERR in test_mipmapping():",J),a.texImage2D(a.TEXTURE_2D,0,C,2,2,0,a.RGBA,W,T),J=a.getError(),J!==a.NO_ERROR)return!1}catch(I){return!1}K&&a.generateMipmap(a.TEXTURE_2D);O.ma();O.g(!1,
!0);a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,l);J=a.getError();J===a.INVALID_OPERATION&&"undefined"!==typeof a.PIXEL_PACK_BUFFER&&(a.bindBuffer(a.PIXEL_PACK_BUFFER,null),a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,l),J=a.getError());return J!==a.NO_ERROR?!1:0!==l[0]}function c(C){return Ma.zb()&&b(k,a.FLOAT,new Float32Array(t),C)?(n=m.ub,!0):!1}function e(C){return Ma.yc()?b(u,Ma.Da(),new Uint16Array(t),C)||b(u,a.FLOAT,new Float32Array(t),C)?(n=m.Na,!0):!1:!1}var g=!1,m={ub:3,Na:2,RGBA8:0},n=m.RGBA8,
l=new Uint8Array(4),r=[.8,1,.8,1],t=r.concat(r,r,r),A=!0,k=null,u=null,B={o:function(){Ma.Db();Ma.Xa();u=k=a.RGBA;if(Na.u()){var C=a.RGBA32F;C&&(k=C);(C=a.RGBA16F)&&(u=C)}O.o();La.reset();La.F();a.viewport(0,0,1,1);w.set("s0");g=!0;C=a.createTexture();a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,C);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);if(e(!0)||c(!0))return!0;
A=!1;if(e(!1)||c(!1))return!0;if(Na.u()){u=k=a.RGBA;if(e(!0)||c(!0))return!0;A=!1;if(e(!1)||c(!1))return!0}return!1},zc:function(){return A},Vd:function(){return n},ee:function(){g||B.o();return n===m.ub},Xc:function(){g||B.o();return n===m.Na},h:function(){g=!1;n=m.RGBA8;A=!0}};return B}(),Pa={instance:function(b){var c=V.instance(b.alpha),e=V.instance(b.beta);return{Gc:function(){c.b(1);e.b(2)}}}},Ra={instance:function(b){var c=null,e=!1,g=!1,m=null,n=!1,l=!1,r=null,t="undefined"===typeof b.preprocessing?
!1:b.preprocessing,A="undefined"===typeof b.preprocessingSize?b.size:b.preprocessingSize;b.mask&&(e=!0,SETTINGS&&void 0!==SETTINGS.sc&&(b.mask=SETTINGS.sc+b.mask),c=V.instance({isFloat:!1,url:b.mask}));var k=!1;b.customInputShader&&(k="s42",w.vb({name:"_",id:k,a:b.customInputShader,c:["uSource"],precision:"lowp"}),w.K(k,[{type:"1i",name:"_",value:0}]));switch(t){case "sobel":r="s31";n=!0;break;case "meanNormalization":r="s32";n=!0;break;case "grayScale":r="s28";n=!1;break;case "grayScaleTilt":r="s29";
l=!0;n=!1;break;case "rgbGrayTilt":r="s30";l=!0;n=!1;break;case "copy":r=k?k:"s0";break;case "inputLightRegulation":r=k?k:"s28";m=Qa.instance({Nb:A,bc:b.size,Ub:b.nBlurPass,Wc:!1});g=!0;break;case "direct":case "none":r=!1;break;default:r="s3"}l&&w.K(r,[{name:"u27",type:"1f",value:b.tilt}]);e&&(r+="Mask");var u=V.instance({isFloat:!1,isPot:!1,width:b.size}),B={A:function(){return A},$a:function(){return B.A()},Pc:function(){return g?m.Lb():u},I:function(){La.S();r&&(w.set(r),n&&w.B("u28",1/b.size),
u.J(),e&&c.b(1),O.g(!1,!1),u.b(0),g&&m.ed(u))},h:function(){u.remove();e&&c.remove()}};return B}},Xa={instance:function(b){"undefined"===typeof b.disableNormalize&&(b.disableNormalize=!1);var c={input:null,ya:null,eb:null,P:null,Ia:null,lb:null,mb:null},e=null,g=[],m=[],n=!1,l=null,r=!0,t=-1,A=b.isReorganize?b.isReorganize:!1,k=b.kernelsNumber?!0:!1,u=b.dynPelu?Pa.instance(b.dynPelu):!1,B=u?!0:!1,C={isEnabled:!1};b.Vc?(b.sparsity="undefined"!==typeof b.sparsity?b.sparsity:b.Ja.$a(),r=!1):"full"===
b.connectivityUp&&(b.sparsity=b.Ja.$a());var W={elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",dynPelu:"s17"}[b.activation],T=b.sparsity*b.sparsity,K=!1,J=b.size,I="";if(b.maxPooling){switch(b.maxPooling.size){case 2:I="s33";break;case 4:I="s34"}K=!0;J/=b.maxPooling.size;c.lb=V.instance({isFloat:!0,isPot:!1,width:J})}var f=void 0!==b.cd&&b.cd?!0:!1,z=null,D=null,da=null;if(f){z="s43"+b.index.toString();w.Mb("s43",z,[((b.normalization.n-1)/2).toFixed(1)]);w.K(z,
[{type:"1i",name:"u1",value:0},{type:"2f",name:"u7",value:[1/b.size,1/b.size]},{type:"1f",name:"u6",value:b.normalization.alpha},{type:"1f",name:"u9",value:b.normalization.beta},{type:"1f",name:"u32",value:b.normalization.k}]);var na={isFloat:!0,isPot:!0,width:b.size};D=V.instance(na);da=V.instance(na)}var qa=-1,ea=null;r&&(c.P=V.instance({isFloat:!0,isPot:!1,width:b.size}));c.ya=V.instance(b.bias);var ra={A:function(){return b.size},$a:function(){return J},Ib:function(){return b.classesCount},uc:function(E){e.b(E)},
fd:function(){b.remap&&b.remap.isEnabled&&(C={isEnabled:!0,Zc:V.instance({isFloat:!1,isFlipY:!1,array:new Uint8Array(b.remap.maskTexture.data),width:b.remap.maskTexture.width,isPot:!1}),layers:b.remap.layers.map(function(E){return b.parent.Oc(E)}),depth:b.remap.depth})},od:function(){switch(b.connectivityUp){case "direct":ea=Sa.instance(b.connectivity);break;case "square":ea=Ta.instance(b.connectivity);break;case "squareFast":ea=Ua.instance(b.connectivity,b.activation);break;case "full":ea=Va.instance(b.connectivity);
break;case "conv":t=b.kernelsNumber,ea=Wa.instance(b.connectivity),A&&(c.Ia=V.instance({width:J,isFloat:!0,isFlipY:!1,isPot:!1}))}if(ea.ha){var E=b.size*b.sparsity;qa=Math.log(E/b.size)/Math.log(2);c.input=V.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:E,hb:qa});c.eb=V.instance({isFloat:!0,isPot:!0,width:b.size})}},I:function(E){e=E;ea.ha?(c.input.J(),k&&c.ya.b(2),ea.I(C),c.input.b(0),c.input.Mc(qa),c.eb.J(),k?w.set("s0"):(w.set("s27"),w.B("u26",T),c.ya.b(1)),c.input.vc(qa,0),O.g(!1,!1),w.set(W),
f?D.l():c.P.l(),c.eb.b(0),B&&u.Gc(),O.g(!1,!1)):(c.P.J(),c.ya.b(1),ea.I());f&&(w.set(z),da.l(),D.b(0),O.g(!1,!1),w.set("s44"),w.B("u6",1),c.P.l(),da.b(1),O.g(!1,!1));if(r)return K?(c.lb.J(),c.P.b(0),w.set(I),w.sa("u7",1/b.size,1/b.size),O.g(!1,!1),E=c.lb):E=c.P,E.b(0),A&&(c.Ia.l(),w.set("s21"),w.sa("u13",t,J/t),O.g(!1,!1),E=c.Ia,c.Ia.b(0)),E;E=c.P;b.disableNormalize||(w.set("gpuRawAvg"===n?"s8":"s7"),w.B("u4",1/b.size),c.mb.J(),c.P.b(0),O.g(!1,!1),E=c.mb);switch(n){case "cpuRGBA2Float":E.Bb(!1);E=
ra.gd(E);l(E);break;case "cpuMeanFloat":E.Bb(!0);E=E.hd();l(E);break;case "gpuRawAvg":case "gpuRaw":E.b(0);case "none":l(E)}return!1},Bc:function(E){E&&"undefined"!==typeof E.ac&&(n=E.ac,l=E.dd);c.P=V.instance({isFloat:!0,isPot:!0,isMipmap:!1,width:b.size});E="undefined"!==typeof b.classesCount&&b.classesCount?b.classesCount:b.size*b.size;for(var v=0,G=0,h=0;v<E;++v)g.push(G+(b.size-1-h)*b.size),m.push([-1,-1,-1,-1]),++G,G===b.size&&(G=0,++h);b.disableNormalize||(c.mb=V.instance({isFloat:!0,isPot:!0,
width:b.size}))},gd:function(E){var v=E.dc();g.forEach(function(G,h){m[h][0]=v[0][G];m[h][1]=v[1][G];m[h][2]=v[2][G];m[h][3]=v[3][G]});return m},h:function(){for(var E in c){var v=c[E];v&&v.remove()}ea&&(ea.h(),ea=null)}};b.Ja&&ra.od(b.Ja);return ra}};
function Ya(){var b=null,c=null,e=null,g=0;this.Oc=function(m){return b[m]};this.ld=function(m){var n=null;g=m.length;b=m.map(function(l,r){l=Object.assign({},l,{index:r,parent:this,Ja:n,Vc:r===g-1});return n=r=0===r?Ra.instance(l):Xa.instance(l)});c=b[0];e=b[g-1];b.forEach(function(l,r){0!==r&&l.fd()})};this.I=function(m,n){var l=n;b.forEach(function(r){l=r.I(l,m)});return l};this.Jb=function(){return c.A()};this.Lb=function(){return e.Pc()};this.nd=function(m){e.Bc(m)};this.Ib=function(){return e.Ib()};
this.h=function(){b&&(b.forEach(function(m){m.h()}),e=c=b=null,g=0)}}
var Sa={instance:function(b){var c=V.instance(b.weights);delete b.weights.data;return{ha:!0,Ca:function(){return 1},h:function(){c.remove()},Qc:function(){return c},I:function(){w.set("s26");c.b(1);O.g(!1,!1)}}}},Va={instance:function(b){var c=b.fromLayerSize,e=V.instance(b.weights);delete b.weights.data;return{ha:!0,Ca:function(){return c},h:function(){e.remove()},I:function(g){if(g.isEnabled){w.set("s24");g.Zc.b(3);var m,n=Math.min(g.layers.length,g.depth);for(m=0;m<n;++m)g.layers[m].uc(4+m)}else w.set("s23");
w.B("u17",b.toLayerSize);e.b(1);O.g(!1,!1)}}}},Ta={instance:function(b){for(var c=b.fromLayerSize,e=b.toLayerSize,g=b.toSparsity,m=g*e,n=m/c,l=c/e,r=0,t=0,A=0,k=Array(g*e*g*e*4),u=Array(g*e*g*e*4),B=Array(c*c),C=0;C<B.length;++C)B[C]=0;C=Math.floor(g/2);for(var W=.5/e,T=.5/c,K=.5/m,J=0;J<e;++J)for(var I=Math.round(J*l),f=0;f<e;++f){var z=Math.round(f*l),D=J/e,da=f/e;D+=W;da+=W;for(var na=0;na<g;++na){var qa=I+na-C;0>qa&&(qa+=c);qa>=c&&(qa-=c);for(var ea=0;ea<g;++ea){var ra=r/m,E=t/m,v=z+ea-C;0>v&&
(v+=c);v>=c&&(v-=c);var G=qa/c,h=v/c;E=1-E-1/m;G+=T;h+=T;ra+=K;E+=K;var U=J*g+na,sa=f*g+ea;sa=e*g-sa-1;U=sa*e*g+U;k[4*U]=ra;k[4*U+1]=E;k[4*U+2]=G;k[4*U+3]=h;h=B[v*c+qa]++;U=h%n;G=qa*n+U;v=v*n+(h-U)/n;v=c*n-1-v;v=v*c*n+G;u[4*v]=ra;u[4*v+1]=E;u[4*v+2]=D;u[4*v+3]=da;++r>=m&&(r=0,++t);++A}}}B=null;var oa=V.instance(b.weights);delete b.weights.data;var pa=V.instance({width:m,isFloat:!0,array:new Float32Array(u),isPot:!0});u=null;var Aa=V.instance({width:m,isFloat:!0,array:new Float32Array(k),isPot:!0});
k=null;return{ha:!0,Ca:function(){return n},h:function(){pa.remove();Aa.remove();oa.remove()},I:function(){w.set("s22");oa.b(1);Aa.b(2);O.g(!1,!1)}}}},Wa={instance:function(b){var c=b.kernelsNumber,e=b.toSparsity,g=e*b.toLayerSize/b.fromLayerSize,m=V.instance(b.weights);delete b.weights.data;return{ha:!0,Ca:function(){return g},$d:function(){return e},Qc:function(){return m},h:function(){m.remove()},I:function(){w.set("s25");w.B("u23",c);w.B("u24",e);w.B("u17",b.toLayerSize);w.B("u25",b.fromLayerSize);
m.b(1);O.g(!1,!1)}}}},Ua={instance:function(b,c){var e=b.fromLayerSize,g=b.toLayerSize,m=b.toSparsity,n=b.stride?b.stride:1,l=m*g/e,r=g<e,t=e/g,A=V.instance(b.weights);delete b.weights.data;var k="s45"+[e.toString(),g.toString(),m.toString(),n.toString(),c].join("_");w.Jc(k)||(b=Ca(c),g=[{type:"1f",name:"u17",value:g},{type:"1f",name:"u31",value:n}],r&&g.push({type:"1f",name:"u25",value:e}),e=[(r?l:m).toFixed(1),b],r&&e.push(t.toFixed(1)),w.Mb(r?"s39":"s38",k,e),w.K(k,g.concat([{type:"1i",name:"u15",
value:0},{type:"1i",name:"u22",value:1},{type:"1i",name:"u14",value:3}])));return{ha:!1,Ca:function(){return l},h:function(){A.remove()},I:function(){w.set(k);A.b(3);O.g(!1,!1)}}}},Qa={instance:function(b){var c=b.Ub?b.Ub:3,e=b.Nb?b.Nb:64,g=b.bc?b.bc:64,m=b.Wc?!0:!1;b={isFloat:!1,width:e,isPot:!1,isFlipY:!1};var n=V.instance(b),l=V.instance(b),r=V.instance(b),t=V.instance(b),A=V.instance({isFloat:!0,width:g,isPot:!1,isFlipY:!1}),k=1/e;return{ed:function(u){w.set("s35");t.l();O.g(m,!1);w.set("s36");
for(var B=0;B<c;++B)n.l(),w.sa("u7",k,0),O.g(m,!1),r.l(),t.b(0),O.g(m,!1),l.l(),n.b(0),w.sa("u7",0,k),O.g(m,!1),t.l(),r.b(0),O.g(m,!1),B!==c-1&&l.b(0);w.set("s37");A.l();u.b(0);l.b(1);t.b(2);O.g(m,!1);A.b(0)},Lb:function(){return A}}}};function Za(b,c){b[c]=!0;b.setAttribute(c,"true")}function $a(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}
function ab(){var b=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return 2<b.length?[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3]||0,10)]:[0,0,0]}function bb(){var b=navigator.userAgent.toLowerCase();return-1!==b.indexOf("safari")&&-1===b.indexOf("chrome")?!0:!1}function cb(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1}
function db(b){if(!b)return b;var c=!1;if(b.video){var e=function(g){var m={};"undefined"!==typeof g.min&&(m.min=g.min);"undefined"!==typeof g.max&&(m.max=g.max);"undefined"!==typeof g.ideal&&(m.ideal=g.ideal);return m};c={};"undefined"!==typeof b.video.width&&(c.width=e(b.video.width));"undefined"!==typeof b.video.height&&(c.height=e(b.video.height));"undefined"!==typeof b.video.facingMode&&(c.facingMode=b.video.facingMode)}c={audio:b.audio,video:c};"undefined"!==typeof b.deviceId&&(c.deviceId=b.deviceId);
return c}function eb(b){var c=b.video.width;b.video.width=b.video.height;b.video.height=c;return b}
function fb(b){function c(u){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(B,C){return Math.abs(B-u)-Math.abs(C-u)})}function e(u){var B=db(b);g.push(u(B))}var g=[];if(!b||!b.video)return g;if(b.video.width&&b.video.height){if(b.video.width.ideal&&b.video.height.ideal){var m=c(b.video.width.ideal).slice(0,3),n=c(b.video.height.ideal).slice(0,3),l={},r=0;for(l.V=void 0;r<m.length;l={V:l.V},++r){l.V=m[r];var t={},A=0;for(t.U=void 0;A<n.length;t={U:t.U},++A)if(t.U=n[A],
l.V!==b.video.width.ideal||t.U!==b.video.height.ideal){var k=Math.max(l.V,t.U)/Math.min(l.V,t.U);k<4/3-.1||k>16/9+.1||e(function(u,B){return function(C){C.video.width.ideal=u.V;C.video.height.ideal=B.U;return C}}(l,t))}}}e(function(u){return eb(u)})}b.video.width&&b.video.height&&(b.video.width.ideal&&b.video.height.ideal&&e(function(u){delete u.video.width.ideal;delete u.video.height.ideal;return u}),e(function(u){delete u.video.width;delete u.video.height;return u}));b.video.facingMode&&(e(function(u){delete u.video.facingMode;
return u}),b.video.width&&b.video.height&&e(function(u){eb(u);delete u.video.facingMode;return u}));g.push({audio:b.audio,video:!0});return g}function gb(b){try{var c=window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(g){c=window.innerHeight>window.innerWidth}if(c&&b&&b.video){c=b.video.width;var e=b.video.height;c&&e&&c.ideal&&e.ideal&&c.ideal>e.ideal&&(b.video.height=c,b.video.width=e)}}
function hb(b){b.volume=0;Za(b,"muted");if(bb()){if(1===b.volume){var c=function(){b.volume=0;window.removeEventListener("mousemove",c,!1);window.removeEventListener("touchstart",c,!1)};window.addEventListener("mousemove",c,!1);window.addEventListener("touchstart",c,!1)}setTimeout(function(){b.volume=0;Za(b,"muted")},5)}}
function ib(b,c,e){return new Promise(function(g,m){if(b.srcObject&&b.srcObject.getVideoTracks){var n=b.srcObject.getVideoTracks();1!==n.length?m("INVALID_TRACKNUMBER"):(n=n[0],c?jb(b,g,m,e):(n.stop(),g()))}else m("BAD_IMPLEMENTATION")})}
function kb(b,c,e,g){function m(l){n||(n=!0,e(l))}var n=!1;navigator.mediaDevices.getUserMedia(g).then(function(l){function r(){setTimeout(function(){if(b.currentTime){var t=b.videoWidth,A=b.videoHeight;if(0===t||0===A)m("VIDEO_NULLSIZE");else{t&&(b.style.width=t.toString()+"px");A&&(b.style.height=A.toString()+"px");t={Ac:null,td:null,$c:null};try{var k=l.getVideoTracks()[0];k&&(t.$c=k,t.Ac=k.getCapabilities(),t.td=k.getSettings())}catch(u){}bb()||$a()?b.parentNode&&null!==b.parentNode?(n||c(b,l,
t),setTimeout(function(){b.play()},100)):(document.body.appendChild(b),hb(b),n||c(b,l,t),setTimeout(function(){b.style.transform="scale(0.0001,0.0001)";b.style.position="fixed";b.style.bottom="0px";b.style.right="0px";hb(b);setTimeout(function(){b.play()},100)},80)):n||c(b,l,t)}}else m("VIDEO_NOTSTARTED")},700)}"undefined"!==typeof b.srcObject?b.srcObject=l:(b.src=window.URL.createObjectURL(l),b.videoStream=l);hb(b);b.addEventListener("loadeddata",function(){var t=b.play();hb(b);"undefined"===typeof t?
r():t.then(function(){r()}).catch(function(){m("VIDEO_PLAYPROMISEREJECTED")})},!1)}).catch(function(l){m(l)})}
function jb(b,c,e,g){if(b)if(cb()){if(g&&g.video){if($a()){var m=ab();(12>m[0]||12===m[0]&&2>m[1])&&gb(g)}g.video.width&&g.video.width.ideal&&(b.style.width=g.video.width.ideal+"px");g.video.height&&g.video.height.ideal&&(b.style.height=g.video.height.ideal+"px")}Za(b,"autoplay");Za(b,"playsinline");g&&g.audio?b.volume=0:Za(b,"muted");kb(b,c,function(){function n(r){if(0===r.length)e("INVALID_FALLBACKCONSTRAINTS");else{var t=r.shift();kb(b,c,function(){n(r)},t)}}var l=fb(g);n(l)},g)}else e&&e("MEDIASTREAMAPI_NOTFOUND");
else e&&e("VIDEO_NOTPROVIDED")}function lb(b){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return b(!1,"NOTSUPPORTED"),!1;navigator.mediaDevices.enumerateDevices().then(function(c){(c=c.filter(function(e){return e.kind&&-1!==e.kind.toLowerCase().indexOf("video")&&e.label&&e.deviceId}))&&c.length&&0<c.length?b(c,!1):b(!1,"NODEVICESFOUND")}).catch(function(){b(!1,"PROMISEREJECTED")})}
window.JEEFACEFILTERAPI=function(){var b,c,e,g,m,n,l,r,t,A,k,u,B,C;function W(){return-1!==[F.play,F.pause].indexOf(ha)}function T(d){if(ha!==F.pause){var q=ha===F.play?M.wa:N.rc;wa=setTimeout(z.bind(null,d),q)}}function K(){if(ha===F.play)return!1;ha=F.play;p.timestamp=Date.now();X&&window.cancelAnimationFrame(X);z(0)}function J(){if(ha!==F.play)return!1;wa&&(clearTimeout(wa),wa=null);X&&(window.cancelAnimationFrame(X),X=null);ha=F.pause;return!0}function I(d,q,y,Z,Y){d=4*(3*q+d)+y;return Z+(aa.buffer[d]/
255+aa.buffer[d+12]/65025)*(Y-Z)}function f(){La.S();O.reset();V.reset();w.ia();w.Cb();a.disable(a.DEPTH_TEST);a.disable(a.BLEND);O.ma();w.ta()}function z(){if(ha!==F.pause){w.Cb();O.reset();O.ma();a.disable(a.DEPTH_TEST);La.S();w.ta();if(!x.fb){var d=x.element.currentTime-x.Ka;0>d&&(x.Ka=x.element.currentTime);1E3*d<N.zd||(x.$.refresh(),x.Ka+=d,w.set("s48"),x.aa.J(),x.$.b(0),O.g(!1,!1))}if(L.L.length>p.G)L.L.splice(0,L.L.length-p.G);else for(;L.L.length<p.G;)L.L.push(0);if(1!==L.i)if(ma.every(E)){for(var q=
0,y=d=0;y<ma.length;++y)ma[y].detected>q&&(q=ma[y].detected,d=0);for(q=0;q<p.G;++q)L.L[q]=d}else{d=L.Sb;q=0;for(y=!1;q<p.G;++q){if(E(ma[d]))if(y){do++d===L.i&&(d=0);while(E(ma[d]))}else y=!0;L.L[q]=d++;d>=L.i&&(d=0)}L.Sb=d}for(d=0;d<p.G;++d)L.X=L.L[d],L.kb=(.5+L.X)/L.i,L.Qb=L.L.lastIndexOf(L.X)===d,w.set("s49"),M.ea&&w.B("u37",ma[L.X].rz),1!==L.i&&w.B("u36",L.kb),R.Ea.J(),x.aa.b(0),aa.Ma.b(1),O.g(!1,!1),R.Ea.b(0),ua.I(!1,R.Ea);d=Date.now();p.pa=d-p.timestamp;p.timestamp=d;-1!==P.nDetectsPerLoop?p.G=
P.nDetectsPerLoop:(d=N.Pa,p.Wb=p.Vb/p.pa,p.Xb=p.Wb*d+p.Xb*(1-d),p.Zb=1E3/p.pa,p.ga=p.Zb*N.Pa+p.ga*(1-N.Pa),p.ga>N.da[1]?(d=N.va[1],1<L.i&&(++d,q=ma.filter(v).length,d*=Math.max(1,q)),p.G=Math.min(p.G+1,d),p.ga=(N.da[0]+N.da[1])/2):p.ga<N.da[0]&&(p.G=Math.max(p.G-1,N.va[0]),p.ga=(N.da[0]+N.da[1])/2));La.F();a.viewport(0,0,3,2*L.i);w.set("s47");aa.Ma.b(0);O.g(!1,!1);a.readPixels(0,0,3,2*L.i,a.RGBA,a.UNSIGNED_BYTE,aa.buffer);for(d=0;d<L.i;++d)if(-1!==L.L.indexOf(d)){var Z=d;q=za[Z];var Y=[Z];y=ma[Z];
var ja=Q[Z],xa=2*Z;q.Aa=I(1,xa,3,0,1);y.detected=ba(y.detected,q.Aa,N.oc);if(q.Aa<N.ib)M.ea&&(y.rz=0);else{var ya=aa.ua;q.x=I(0,xa,1,-1,1);q.y=I(0,xa,2,-1,1);q.R=I(0,xa,3,0,1);q.nb=I(1,xa,0,-ya[0],ya[0]);q.ob=I(1,xa,1,-ya[1],ya[1]);q.ra=I(1,xa,2,-ya[2],ya[2]);for(ya=0;ya<aa.Z;++ya)q.Eb[ya]=aa.Ba[ya](I(2,xa,ya,0,1));Y.Va=q.x-y.x;Y.Wa=q.y-y.y;Y.Ua=q.R-y.s;Y.Ra=q.nb-y.rx;Y.Sa=q.ob-y.ry;Y.Ta=M.ea?q.ra:q.ra-y.rz;Y=(1-Ba(ca.translationFactorRange[0],ca.translationFactorRange[1],Math.sqrt(Y.Va*Y.Va+Y.Wa*
Y.Wa+Y.Ua*Y.Ua)/p.pa))*(1-Ba(ca.rotationFactorRange[0],ca.rotationFactorRange[1],Math.sqrt(Y.Ra*Y.Ra+Y.Sa*Y.Sa+Y.Ta*Y.Ta)/p.pa))*Ba(ca.qualityFactorRange[0],ca.qualityFactorRange[1],q.Aa);Z=ja[++fa[Z]%ja.length]=Y;for(xa=0;xa<ja.length;++xa)Z=Math.min(Z,ja[xa]);Z=Math.max(.5,Z);Y=Math.min(Z,Y);ja=ba(ca.alphaRange[1],ca.alphaRange[0],Math.pow(Y,N.qc));y.x=ba(y.x,q.x,ja);y.y=ba(y.y,q.y,ja);y.s=ba(y.s,q.R,ja);y.rx=ba(y.rx,q.nb,ja);y.ry=ba(y.ry,q.ob,ja);y.rz=M.ea?y.rz+ja*q.ra:ba(y.rz,q.ra,ja);ja=Math.max(ja,
N.pc);for(Z=0;Z<aa.Z;++Z)y.expressions[Z]=ba(y.expressions[Z],q.Eb[Z],ja);++q.Ha}}La.xd();La.reset();V.reset();a.enable(a.DEPTH_TEST);M.za&&(1===L.i?M.za(ma[0]):M.za(ma));a.disable(a.BLEND);ha===F.play&&(X=window.requestAnimationFrame(T))}}function D(){function d(y){for(var Z=[],Y=0;Y<L.i;++Y)Z.push(Object.assign({},y));return Z}x.aa=V.instance({isPot:!1,isLinear:!0,isFloat:!1,width:R.M,height:R.O});R.Ea=V.instance({isPot:!0,isFloat:!1,width:ua.Jb()});var q={width:3,height:L.i,isFloat:!0,isPot:!1,
array:function(y){for(var Z=new Float32Array(y.length*L.i),Y=0,ja;Y<L.i;++Y)for(ja=0;ja<y.length;++ja)Z[Y*y.length+ja]=y[ja];return Z}(new Float32Array([0,P.borderWidth,P.borderHeight,0,0,0,0,0,0,0,0,0]))};aa.Ma=Oa.instance(q);aa.buffer=new Uint8Array(8*q.width*L.i);za=d({Aa:0,x:0,y:0,R:1,nb:0,ob:0,ra:0,Eb:new Float32Array(aa.Z),Ha:0});ma=d({detected:0,x:0,y:0,s:1,rx:0,ry:0,rz:0,expressions:new Float32Array(aa.Z)});d({Va:0,Wa:0,Ua:0,Ra:0,Sa:0,Ta:0})}function da(){w.K("s49",[{type:"1i",name:"u1",value:0},
{type:"1i",name:"u34",value:1},{type:"2f",name:"u35",value:R.v},{type:"1f",name:"u36",value:.5},{type:"1f",name:"u37",value:0}]);w.K("s50",[{type:"1i",name:"u38",value:0},{type:"1i",name:"u34",value:1},{type:"1f",name:"u41",value:N.vd},{type:"1f",name:"u42",value:N.lc},{type:"1f",name:"u43",value:N.kc},{type:"3f",name:"u40",value:[aa.ba[0]*R.v[0],aa.ba[1]*R.v[1],aa.ba[2]]},{type:"1f",name:"u36",value:.5},{type:"1f",name:"u44",value:1},{type:"1f",name:"u37",value:0}]);var d=[{type:"1i",name:"u38",
value:0}];w.K("s51",d);w.K("s52",d);w.K("s47",[{type:"1i",name:"u34",value:0},{type:"1f",name:"u47",value:R.v[0]},{type:"2f",name:"u46",value:[0,.5/L.i]}])}function na(){var d=ua.Jb(),q=R.M/d;n=P.minScale*q;l=P.maxScale*q;r=(1-2*P.borderWidth)/P.nStepsX;t=(1-2*P.borderHeight)/P.nStepsY;A=(l-n)/P.nStepsScale;k=P.borderWidth;u=P.borderHeight;B=1-P.borderWidth;C=1-P.borderHeight;R.v[0]=d/R.M;R.v[1]=d/R.O;b=P.borderWidth;c=P.borderHeight;e=n;g=P.borderWidth;m=P.borderHeight;la=n}function qa(d){if(M.ja)ea("string"===
typeof M.ja?JSON.parse(M.ja):M.ja,d);else{var q=M.tb;"JSON"!==q.toUpperCase().split(".").pop()&&(q+=N.save);ia(q,function(y){y=JSON.parse(y);ea(y,d)})}}function ea(d,q){if(d.exportData){var y=d.exportData;y.thetaXYZfactor&&(aa.ua=y.thetaXYZfactor);y.trackingDxysFactor&&(aa.ba=y.trackingDxysFactor);"undefined"!==typeof y.nExpressions&&(aa.Z=y.nExpressions)}q(d)}function ra(){if(Na.o({Qa:M.T,width:R.M,height:R.O,debug:!1,$b:function(){ka("GLCONTEXT_LOST")},antialias:!0,premultipliedAlpha:!0})){if(Na.Sc())return!0;
ka("GL_INCOMPATIBLE");return!1}ka("GL_INCOMPATIBLE");return!1}function E(d){return d.detected<=N.ib}function v(d){return d.detected>N.ib}function G(d,q,y,Z){return y>d?Math.max(0,d+q/2-(y-Z/2)):Math.max(0,y+Z/2-(d-q/2))}function h(){return za.some(function(d,q){if(q===L.X)return!1;q=za[L.X];if(q.Ha>d.Ha||3>d.Ha||G(q.x/2,q.R,d.x/2,d.R)<N.Tb*q.R)return!1;var y=R.M/R.O;return G(q.y/2,q.R*y,d.y/2,d.R*y)>N.Tb*q.R*y})}function U(){var d=L.X;aa.Ma.pd(1);1!==L.i&&(a.viewport(0,0,3,L.i),w.set("s0"),w.fc("u1",
1),O.g(!1,!1),w.fc("u1",0));a.viewport(0,d,1,1);w.set("s50");M.ea&&w.B("u37",ma[d].rz);1!==L.i&&w.B("u36",L.kb);if(1<L.i){var q=h()?0:1;w.B("u44",q)}w.rd("u39",g,m,la);O.g(!1,!1);L.Qb&&(a.viewport(1,d,1,1),w.set("s51"),O.g(!1,!1),a.viewport(2,d,1,1),w.set("s52"),O.g(!1,!1));e+=A;e>l&&(b+=r,e=n,b>B&&(b=k,c+=t,c>C&&(c=u)));g=b+.5*(Math.random()-.5)*r;m=c+.5*(Math.random()-.5)*t;la=e+.5*(Math.random()-.5)*A}function sa(){x.$&&x.$.remove();x.$=V.instance({D:x.element,isPot:!1,isFloat:!1,isFlipY:!0})}
function oa(){w.K("s48",[{type:"1i",name:"u1",value:0},{type:"mat2",name:"u33",value:x.m}])}function pa(){x.C[0]=.5;x.C[1]=.5;var d=x.v[1]/x.v[0],q=Na.N()/Na.A();90===Math.abs(H.rotate)&&(d=1/d);d>q?x.C[1]*=q/d:x.C[0]*=d/q;w.K("s50",[{name:"u45",type:"1f",value:q}]);x.m[0]=0;x.m[1]=0;x.m[2]=0;x.m[3]=0;switch(H.rotate){case 0:x.m[0]=x.C[0];x.m[3]=x.C[1];break;case 180:x.m[0]=-x.C[0];x.m[3]=-x.C[1];break;case 90:x.m[1]=x.C[0];x.m[2]=-x.C[1];break;case -90:x.m[1]=-x.C[0],x.m[2]=x.C[1]}H.flipX&&(x.m[0]*=
-1,x.m[2]*=-1)}function Aa(){var d=x.element.videoWidth,q=x.element.videoHeight,y=x.v[0]!==d||x.v[1]!==q;y&&(x.v[0]=d,x.v[1]=q);return y}function Fa(d,q){if(ha===F.error)return!1;x.element=d;Aa();q&&q();return!0}function Ga(d,q,y){d&&d();x.oa={video:{facingMode:{ideal:H.facingMode},width:{min:H.minWidth,max:H.maxWidth,ideal:H.idealWidth},height:{min:H.minHeight,max:H.maxHeight,ideal:H.idealHeight}},audio:!1};H.deviceId&&(x.oa.deviceId=H.deviceId);jb(x.element?x.element:cb()?document.createElement("video"):
!1,function(Z){q&&q(Z);y(Z)},function(){ka("WEBCAM_UNAVAILABLE")},x.oa)}function ka(d){ha!==F.error&&(ha=F.error,M.na&&M.na(d))}function ta(d,q){for(var y in d)"undefined"!==typeof q[y]&&(d[y]=q[y]);q===P&&P.nDetectsPerLoop&&(p.G=P.nDetectsPerLoop,p.Vb=P.nDetectsPerLoop)}var N={save:"NNC.json",wb:0,rc:25,Pa:.2,da:[45,55],Bd:1/3.5,va:[2,7],jd:{minScale:.15,maxScale:.6,borderWidth:.2,borderHeight:.2,nStepsX:6,nStepsY:5,nStepsScale:3,nDetectsPerLoop:-1},vd:50,Tb:.12,
ib:.6,ad:8,lc:.8,kc:1,ud:{translationFactorRange:[.0015,.005],rotationFactorRange:[.003,.02],qualityFactorRange:[.9,.98],alphaRange:[.05,1]},ua:[.65,1,.262],ba:[.092,.092,.3],oc:.2,qc:2,pc:.1,bd:8,Yb:1,Kc:Ba.bind(null,.3,.7),zd:20},H={facingMode:"user",idealWidth:800,idealHeight:600,minWidth:480,maxWidth:1280,minHeight:480,maxHeight:1280,rotate:0,flipX:!1},F={jb:-3,Yc:-1,error:-2,play:1,pause:2},ha=F.jb,x=null,va={fb:!1,element:null,$:null,aa:null,v:[0,0],C:[.5,.5],m:[.5,0,0,.5],Ka:0,oa:null},M=null,
Ia={na:null,za:null,tb:"./",ja:null,T:null,wa:N.wb,cc:N.wb,Fa:!1,ea:!1},ua=null,P=null,ca=null;var la=e=m=g=c=b=l=n=C=B=u=k=A=t=r=0;var R=null,Da={M:0,O:0,v:[0,0],Ea:null},aa={Ma:null,buffer:null,ba:null,ua:null,Z:N.Yb,Ba:null},za=null,ma=null,wa=null,X=null,L={i:1,X:0,L:null,Qb:!1,Sb:0,kb:0},p={pa:0,timestamp:0,Wb:0,Xb:0,G:N.va[0],Vb:N.va[0],Zb:0,ga:0,Id:1},Q=[],fa=[],S={VERSION:"1.2.6",init:function(d){function q(){ha!==F.error&&2===++Z&&(pa(),sa(),oa(),M.na&&(M.na(!1,{GL:a,canvasElement:M.T,videoTexture:x.aa.get(),
maxFacesDetected:L.i,videoElement:x.element}),f()),K())}if(ha!==F.jb)return d.callbackReady&&d.callbackReady("ALREADY_INITIALIZED"),!1;ha=F.Yc;x=Object.assign({},va);M=Object.assign({},Ia);R=Object.assign({},Da);L.L=[0];aa.ba=N.ba.slice(0);aa.ua=N.ua.slice(0);d.callbackReady&&(M.na=d.callbackReady);d.callbackTrack&&(M.za=d.callbackTrack);aa.Z="undefined"===typeof d.nExpressions?N.Yb:d.nExpressions;if(d.expressionsEasings)aa.Ba=d.expressionsEasings;else{aa.Ba=[];for(var y=0;y<aa.Z;++y)aa.Ba.push(N.Kc)}"undefined"!==
typeof d.animateDelay&&(M.wa=d.animateDelay);"undefined"!==typeof d.NNCpath&&(M.tb=d.NNCpath);"undefined"!==typeof d.NNC&&(M.ja=d.NNC);"undefined"!==typeof d.maxFacesDetected&&(L.i=Math.max(1,d.maxFacesDetected));"undefined"!==typeof d.followZRot&&(M.ea=d.followZRot?!0:!1);if(L.i>N.ad)return ka("MAXFACES_TOOHIGH"),!1;if(!d.canvasId&&!d.canvas)return ka("NO_CANVASID"),!1;M.T=d.canvas?d.canvas:document.getElementById(d.canvasId);if(!M.T)return ka("INVALID_CANVASID"),!1;R.M=M.T.width;R.O=M.T.height;
if(!R.M||!R.O)return ka("INVALID_CANVASDIMENSIONS"),!1;for(y=0;y<L.i;++y)Q.push(new Float32Array(N.bd)),fa.push(0);P=Object.create(N.jd);d.scanSettings&&ta(P,d.scanSettings);ca=Object.create(N.ud);d.stabilizationSettings&&ta(ca,d.stabilizationSettings);var Z=0;d.videoSettings&&d.videoSettings.videoElement?Fa(d.videoSettings.videoElement,q):(d.videoSettings&&ta(H,d.videoSettings),Ga(d.onWebcamAsk,d.onWebcamGet,function(Y){Fa(Y,q)}));qa(function(Y){if(!ra())return!1;ua=new Ya;ua.ld(Y.layers);ua.nd({ac:"gpuRawAvg",
dd:U});w.nc([{id:"s48",name:"_",ca:"attribute vec2 a0;uniform mat2 u33;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5,.5)+u33*a0;}",xa:["a0"],ka:[2],a:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",c:["u1","u33"],precision:"lowp"},{id:"s49",name:"_",a:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",ca:"attribute vec2 a0;uniform sampler2D u34;uniform vec2 u35;uniform float u36,u37;varying vec2 vv0;void main(){vec4 a=texture2D(u34,vec2(.17,u36));vec2 d=a.gb,e=a.a*u35;float b=cos(u37),c=sin(u37);vec2 g=mat2(b,c,-c,b)*a0;vv0=d+g*.5*e,gl_Position=vec4(a0,0.,1.);}",
xa:["a0"],ka:[2],c:["u1","u34","u35","u36","u37"],precision:"lowp"},{id:"s50",name:"_",a:"uniform sampler2D u38,u34;uniform vec3 u39,u40;uniform float u41,u42,u43,u36,u44,u37,u45;const vec4 e=vec4(.25,.25,.25,.25);void main(){vec4 g=texture2D(u38,vec2(.625,.625)),h=texture2D(u38,vec2(.875,.625)),a=texture2D(u34,vec2(.17,u36));float b=dot(g,e),i=dot(h,e);bool j=b>u42&&b>i+u43;j?a.r=2.:a.r>u41?a.r=0.:a.r>1.9?a.r+=1.:0.,a.r*=u44;if(a.r<.9)a=vec4(1.,u39);else{a.r*=step(1.9,a.r);float k=dot(e,texture2D(u38,vec2(.875,.875))),l=dot(e,texture2D(u38,vec2(.125,.625))),m=dot(e,texture2D(u38,vec2(.375,.625))),c=cos(u37),d=sin(u37);vec2 f=mat2(c,d*u45,-d/u45,c)*vec2(k,l);a.gba+=vec3(f,m)*u40*a.a;}gl_FragColor=a;}",
ca:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",c:"u38 u34 u39 u41 u40 u44 u37 u45 u42 u43 u36".split(" ")},{id:"s51",name:"_",ca:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",a:"uniform sampler2D u38;const vec4 e=vec4(.25,.25,.25,.25);const vec3 g=vec3(.5,.5,.5);void main(){float a=dot(e,texture2D(u38,vec2(.125,.875))),b=dot(e,texture2D(u38,vec2(.375,.875))),c=dot(e,texture2D(u38,vec2(.625,.875))),d=dot(e,texture2D(u38,vec2(.625,.625)));vec3 f=vec3(a,b,c)*.5+g;gl_FragColor=vec4(f,d);}",
c:["u38"]},{id:"s52",name:"_",ca:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",a:"uniform sampler2D u38;const vec4 e=vec4(.25,.25,.25,.25);void main(){float a=dot(e,texture2D(u38,vec2(.375,.375))),b=dot(e,texture2D(u38,vec2(.625,.375))),c=dot(e,texture2D(u38,vec2(.875,.375))),d=dot(e,texture2D(u38,vec2(.125,.125)));gl_FragColor=vec4(a,b,c,d);}",c:["u38"]},{id:"s47",name:"_",a:"uniform sampler2D u34;uniform vec2 u46;uniform float u47;varying vec2 vv0;void main(){float g=step(.5,mod(gl_FragCoord.y+1.5,2.)),c=step(.33,vv0.x);vec4 a=texture2D(u34,vv0+u46);a.a=mix(a.a*u47,a.a,c);vec4 d=floor(255.*a),f=255.*(255.*a-d),b=mix(d,f,g)/255.;b.x=mix(step(a.x,1.5),b.x,c),gl_FragColor=b;}",
c:["u34","u47","u46"]}]);D();na();da();q()});return!0},destroy:function(){return new Promise(function(d){S.toggle_pause(!0,!0).finally(function(){ua&&ua.h();Na.h();ua=ma=za=null;Q.splice(0);fa.splice(0);ha=F.jb;d()})})},toggle_pause:function(d,q){if(!W())return Promise.reject();q=q?ib(x.element,!d,x.oa):Promise.resolve();d?J():K();return q},update_videoSettings:function(d){J();return new Promise(function(q){ib(x.element,!1,x.oa).then(function(){ta(H,d);Ga(null,null,function(y){Fa(y,function(){pa();
oa();K();q()})})})})},toggle_slow:function(d){W()&&ha===F.play&&(d&&!M.Fa?(M.cc=M.wa,P.nDetectsPerLoop=1,this.set_animateDelay(100),M.Fa=!0):!d&&M.Fa&&(P.nDetectsPerLoop=-1,this.set_animateDelay(M.cc),M.Fa=!1))},set_animateDelay:function(d){M.wa=d},resize:function(){var d=M.T.width,q=M.T.height;if(!Aa()&&d===R.M&&q===R.O)return!1;R.M=d;R.O=q;na();da();pa();oa();x.aa&&x.aa.resize(R.M,R.O);return!0},set_inputTexture:function(d,q,y){x.v[0]=q;x.v[1]=y;x.fb=!0;pa();f();oa();w.set("s48");x.aa.J();a.activeTexture(a.TEXTURE0);
a.bindTexture(a.TEXTURE_2D,d);O.g(!0,!0)},reset_inputTexture:function(){Aa();x.fb=!1;pa();oa()},get_videoDevices:function(d){return lb(d)},set_scanSettings:function(d){ta(P,d);na();da()},set_stabilizationSettings:function(d){ta(ca,d)},set_videoOrientation:function(d,q){W()&&(H.flipX=q,H.rotate=d,pa(),oa())},update_videoElement:function(d,q){Fa(d?d:x.element,function(){sa();pa();oa();q&&q()})}};return S}();
;return JEEFACEFILTERAPI;})();